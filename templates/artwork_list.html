{% extends "base.html" %}

{% block title %} - 作品列表{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>艺术作品</h1>
    <div class="col-md-4">
        <!-- 搜索框 -->
        <div class="input-group">
            <input type="text" id="search-input" class="form-control" placeholder="搜索作品...">
            <button class="btn btn-primary" onclick="searchArtworks()">
                <i class="fas fa-search"></i>
            </button>
        </div>
    </div>
</div>

    return render_template('artwork_list.html',
                           artworks=artworks_list,
                           all_artists=all_artists,
                           styles=styles,                # 新增
                           eras=eras,                    # 新增
                           user_logged_in=user_logged_in,
                           current_style=style,
                           current_era=era,
                           current_artist=artist_name,
                           view_mode=view_mode)

<!-- 作品展示区 - 根据 view_mode 显示不同样式 -->
<div class="row {% if view_mode == 'list' %}flex-column{% else %}row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4{% endif %}" id="artworks-container">
    {% for artwork in artworks %}
        {% if view_mode == 'grid' %}
        <!-- 网格模式卡片（与您原来一样） -->
        <div class="col mb-4">
            <div class="card h-100">
                <img src="{{ artwork.image_url or url_for('static', filename='images/default.jpg') }}"
                     class="card-img-top" alt="{{ artwork.title }}" style="height: 200px; object-fit: cover;">
                <div class="card-body">
                    <h5 class="card-title">{{ artwork.title }}</h5>
                    <p class="card-text text-muted">
                        {% if artwork.year %}{{ artwork.year }}年{% endif %}
                        {% if artwork.style %}| {{ artwork.style }}{% endif %}
                    </p>
                    <div class="d-flex justify-content-between">
                        <a href="/artwork/{{ artwork.id }}" class="btn btn-sm btn-primary">查看详情</a>
                        <a href="/author/{{ artwork.artist_id }}" class="btn btn-sm btn-outline-secondary">查看作者</a>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <!-- 列表模式卡片（一行一个，横向布局） -->
        <div class="col mb-3">
            <div class="card d-flex flex-row p-2">
                <img src="{{ artwork.image_url or url_for('static', filename='images/default.jpg') }}"
                     alt="{{ artwork.title }}" style="width: 120px; height: 120px; object-fit: cover; border-radius: 4px;">
                <div class="card-body d-flex flex-column justify-content-center">
                    <h5 class="card-title">{{ artwork.title }}</h5>
                    <p class="card-text text-muted">
                        {{ artwork.artist.name if artwork.artist else '未知艺术家' }}
                        {% if artwork.year %}| {{ artwork.year }}年{% endif %}
                        {% if artwork.style %}| {{ artwork.style }}{% endif %}
                    </p>
                    <div>
                        <a href="/artwork/{{ artwork.id }}" class="btn btn-sm btn-primary">查看详情</a>
                        {% if artwork.artist_id %}
                        <a href="/author/{{ artwork.artist_id }}" class="btn btn-sm btn-outline-secondary ms-2">查看作者</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    {% else %}
    <div class="col-12 text-center py-5">
        <p class="text-muted">暂无符合条件的作品</p>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block scripts %}
<script>
// 这里添加筛选和搜索功能
</script>
{% endblock %}